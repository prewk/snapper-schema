[
  {
    "type": "ENTITY",
    "name": "first_levels",
    "morphAs": "FirstLevel",
    "key": {
      "type": "PRIMARY_KEY",
      "name": "id"
    },
    "fields": [
      {
        "type": "VALUE",
        "name": "name",
        "cast": "NONE",
        "optional": true,
        "fallback": "",
        "circularFallback": ""
      },
      {
        "type": "BELONGS_TO",
        "name": "fav_second_level",
        "foreignEntity": "second_levels",
        "localKey": "fav_second_level_id",
        "optional": true,
        "relationCondition": "NONE",
        "conditionMatcher": "",
        "fallback": 0,
        "circularFallback": 0
      }
    ]
  },
  {
    "type": "ENTITY",
    "name": "recursives",
    "morphAs": "Recursive",
    "key": {
      "type": "PRIMARY_KEY",
      "name": "id"
    },
    "fields": [
      {
        "type": "BELONGS_TO",
        "name": "parent",
        "foreignEntity": "recursives",
        "localKey": "parent_id",
        "relationCondition": "NONE",
        "conditionMatcher": "",
        "optional": false,
        "fallback": 0,
        "circularFallback": 0
      }
    ]
  },
  {
    "type": "ENTITY",
    "name": "second_levels",
    "morphAs": "SecondLevel",
    "key": {
      "type": "PRIMARY_KEY",
      "name": "id"
    },
    "fields": [
      {
        "type": "BELONGS_TO",
        "name": "first_level",
        "foreignEntity": "first_levels",
        "localKey": "first_level_id",
        "relationCondition": "NONE",
        "conditionMatcher": "",
        "optional": false,
        "fallback": 0,
        "circularFallback": 0
      },
      {
        "type": "VALUE",
        "name": "name",
        "cast": "NONE",
        "optional": true,
        "fallback": "",
        "circularFallback": ""
      }
    ]
  },
  {
    "type": "ENTITY",
    "name": "third_levels",
    "morphAs": "ThirdLevel",
    "key": {
      "type": "PRIMARY_KEY",
      "name": "id"
    },
    "fields": [
      {
        "type": "BELONGS_TO",
        "name": "second_level",
        "foreignEntity": "second_levels",
        "localKey": "second_level_id",
        "relationCondition": "NONE",
        "conditionMatcher": "",
        "optional": false,
        "fallback": 0,
        "circularFallback": 0
      },
      {
        "type": "MAP",
        "name": "shallow_data",
        "cast": "JSON",
        "greedy": true,
        "optional": false,
        "fallback": {},
        "circularFallback": {},
        "relations": [
          {
            "type": "REG_EXP_RELATION_ENTRY",
            "path": "html_content",
            "matchers": [
              {
                "type": "REG_EXP_RELATION_MATCHER",
                "expression": "/href=\"#\\/first_level\\/([^\"]*)\"/",
                "cast": "AUTO",
                "relations": [
                  null,
                  "first_levels"
                ]
              },
              {
                "type": "REG_EXP_RELATION_MATCHER",
                "expression": "/href=\"#\\/second_level\\/([^\"]*)\"/",
                "cast": "AUTO",
                "relations": [
                  null,
                  "second_levels"
                ]
              }
            ]
          }
        ]
      },
      {
        "type": "MAP",
        "name": "deep_data",
        "cast": "JSON",
        "greedy": true,
        "optional": false,
        "fallback": {},
        "circularFallback": {},
        "relations": [
          {
            "type": "VALUE_RELATION_ENTRY",
            "path": "fourth_level.one",
            "relationCondition": "NONE",
            "conditionMatcher": "",
            "relation": "fourth_levels"
          },
          {
            "type": "VALUE_RELATION_ENTRY",
            "path": "/\\.deep_second_level_id$/",
            "relationCondition": "REGEXP",
            "conditionMatcher": "/^\\d+|.{10}/",
            "relation": "second_levels"
          },
          {
            "type": "LIST_RELATION_ENTRY",
            "path": "fourth_level.several",
            "relationCondition": "NONE",
            "conditionMatcher": "",
            "relation": "fourth_levels"
          },
          {
            "type": "VALUE_RELATION_ENTRY",
            "path": "maybe_second_level",
            "relationCondition": "NON_ZERO_INT",
            "conditionMatcher": "",
            "relation": "second_levels"
          }
        ]
      }
    ]
  },
  {
    "type": "ENTITY",
    "name": "fourth_levels",
    "morphAs": "ForthLevel",
    "key": {
      "type": "PRIMARY_KEY",
      "name": "id"
    },
    "fields": [
      {
        "type": "VALUE",
        "name": "name",
        "cast": "NONE",
        "optional": true,
        "fallback": "",
        "circularFallback": ""
      }
    ]
  },
  {
    "type": "ENTITY",
    "name": "polys",
    "morphAs": "Poly",
    "key": {
      "type": "PRIMARY_KEY",
      "name": "id"
    },
    "fields": [
      {
        "type": "MORPH_TO",
        "name": "polyable",
        "idField": "polyable_id",
        "typeField": "polyable_type",
        "optional": false,
        "fallback": null,
        "circularFallback": 0,
        "typeCircularFallback": ""
      },
      {
        "type": "VALUE",
        "name": "type",
        "cast": "NONE",
        "optional": false,
        "fallback": "",
        "circularFallback": ""
      },
      {
        "type": "MATCH",
        "name": "type",
        "optional": false,
        "fallback": {},
        "circularFallback": {},
        "cases": [
          ["first", {
            "type": "BELONGS_TO",
            "name": "some_level",
            "foreignEntity": "first_levels",
            "localKey": "some_level",
            "relationCondition": "NONE",
            "conditionMatcher": "",
            "optional": false,
            "fallback": null,
            "circularFallback": null
          }],
          ["second", {
            "type": "BELONGS_TO",
            "name": "some_level",
            "foreignEntity": "second_levels",
            "localKey": "some_level",
            "relationCondition": "NONE",
            "conditionMatcher": "",
            "optional": false,
            "fallback": null,
            "circularFallback": null
          }]
        ],
        "default": {
          "type": "VALUE",
          "name": "some_level",
          "cast": "NONE",
          "optional": false,
          "fallback": null,
          "circularFallback": null
        }
      }
    ]
  }
]